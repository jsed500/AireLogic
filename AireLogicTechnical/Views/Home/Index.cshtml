@{
    ViewData["Title"] = "Home Page";
}

<div ng-controller="peopleCtrl">

    <div ng-show="showList">

        <h2>
            People
        </h2>

        <hr />

        <table>
            <tr>
                <th>
                    Name
                </th>
                <th>
                    Palindrome
                </th>
                <th>
                    Authorised
                </th>
                <th>
                    Enabled
                </th>
                <th>
                    Colours
                </th>
            </tr>
            <tbody ng-show="people.length > 0">
                <tr ng-repeat="person in people">
                    <td>
                        <a ng-click="viewPerson(person.personId)">
                            <span ng-bind="person.firstName + ' ' + person.lastName" />
                        </a>
                    </td>
                    <td>
                        <span ng-bind="person.palindrome" />
                    </td>
                    <td>
                        <span ng-class="person.isAuthorised ? 'activeText' : 'inactiveText'" ng-bind="person.isAuthorised" />
                    </td>
                    <td>
                        <span ng-class="person.isEnabled ? 'activeText' : 'inactiveText'" ng-bind="person.isEnabled" />
                    </td>
                    <td>
                        <div ng-repeat="item in person.favouriteColours" class="inlineSpan">
                            <span ng-bind="item.colour.name"></span>
                        </div>
                    </td>
                </tr>
            </tbody>
            <tbody ng-show="people.length == 0">
                <tr>
                    <td colspan="7" style="text-align: center;">No people in list</td>
                </tr>
            </tbody>
        </table>

    </div>

    <div ng-show="!showList">

        <h2>
            Update {{selectedPerson.person.firstName}} {{selectedPerson.person.lastName}}
        </h2>

        <h4>
            User Details
        </h4>

        <hr />

        <div>
            <label ng-click="switchAuth()">Authorised</label>
            <input ng-show="showAuth" ng-model="selectedPerson.person.isAuthorised" type="checkbox" />
            <br />
            <label ng-click="switchEnabled()">Enabled</label>
            <input ng-show="showEnabled" ng-model="selectedPerson.person.isEnabled" type="checkbox" />
        </div>

        <h4>
            Favourite Colours
        </h4>

        <hr />

        <div>

            @*forloop*@
            <div ng-repeat="colour in selectedPerson.colours">
                <label ng-click="toggleCheckboxVisibility(colour)">{{colour.name}}</label>
                <input ng-show="!colour.hidden" ng-model="colour.isSelected" type="checkbox" />
                <br />
            </div>

        </div>

        <button class="tertiaryButton1 smallButton" ng-click="savePerson()">Save Changes</button>
        <button class="btn-default smallButton" ng-click="goBack()">Cancel</button>

    </div>

</div>
